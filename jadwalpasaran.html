<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="permissions-policy" content="clipboard-write=(self)">
    <title>Jadwal Togel</title>
    <style>
        :root {
            --gold-primary: #D4AF37;
            --gold-light: #F4D03F;
            --gold-dark: #B8860B;
            --gold-gradient: linear-gradient(135deg, #B8860B, #D4AF37, #F4D03F, #8B7500);
            --gold-glow: 0 0 20px rgba(212, 175, 55, 0.5);
            --gold-accent: #FFD700;
            --green-primary: #2d7a2d;
            --green-light: #51cf66;
            --green-dark: #1a5c1a;
            --green-gradient: linear-gradient(135deg, #2d7a2d, #51cf66, #69db7c, #1a5c1a);
            --green-glow: 0 0 20px rgba(45, 122, 45, 0.5);
            --bg-dark: #1a1a1a;
            --bg-card: #252525;
            --text-light: #f8f8f8;
            --text-secondary: #cccccc;
            --shadow-gold: 0 4px 15px rgba(212, 175, 55, 0.3);
            --shadow-green: 0 4px 15px rgba(45, 122, 45, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 20px;
            background-image: url('https://cdn.areabermain.club/assets/cdn/az5/2026/02/03/20260203/d8632a0c7c9125ef1a67069b11b5a102/background-imlek-hokbentoto.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }
        
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 26, 0.85);
            z-index: -1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .header::after {
            content: "";
            display: block;
            width: 150px;
            height: 3px;
            background: var(--gold-gradient);
            margin: 15px auto;
            border-radius: 3px;
        }

        .datetime-display {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .date-box, .time-box {
            background: var(--bg-card);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 15px 30px;
            box-shadow: var(--shadow-gold);
            transition: all 0.3s ease;
        }

        .date-box:hover, .time-box:hover {
            border-color: var(--gold-primary);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
            transform: translateY(-2px);
        }

        .date-box { min-width: 280px; }
        .time-box { min-width: 220px; }

        .date-label, .time-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .date-value {
            font-size: 1.3rem;
            font-weight: 700;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }

        .time-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .timezone {
            font-size: 0.85rem;
            color: var(--gold-light);
            margin-top: 5px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .datetime-display { gap: 15px; }
            .date-box, .time-box {
                padding: 12px 20px;
                min-width: auto;
                width: 100%;
                max-width: 300px;
            }
            .date-value { font-size: 1.1rem; }
            .time-value { font-size: 1.6rem; }
        }

        .clear-data-btn {
            display: inline-block;
            margin-left: 15px;
            padding: 12px 20px;
            background: #666;
            color: white;
            border: 1px solid rgba(102, 102, 102, 0.5);
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .clear-data-btn:hover {
            background: #888;
            transform: translateY(-2px);
        }

        .alarm-controls-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .alarm-toggle {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-card);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .alarm-toggle:hover { background: rgba(212, 175, 55, 0.1); }

        .alarm-icon { font-size: 1.2rem; transition: all 0.3s ease; }

        .alarm-toggle.active .alarm-icon {
            animation: ring 1s ease-in-out infinite;
        }

        @keyframes ring {
            0%, 100% { transform: rotate(0deg); }
            10%, 30% { transform: rotate(-10deg); }
            20%, 40% { transform: rotate(10deg); }
            50% { transform: rotate(0deg); }
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(212, 175, 55, 0.3);
            outline: none;
            border-radius: 2px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            background: var(--gold-primary);
            cursor: pointer;
            border-radius: 50%;
        }

        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            background: var(--gold-primary);
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: #666;
            border-radius: 13px;
            transition: background 0.3s ease;
        }

        .toggle-switch.active { background: var(--green-primary); }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider { transform: translateX(24px); }

        .toggle-label {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .toggle-switch.active ~ .toggle-label {
            color: var(--green-light);
            font-weight: 600;
        }

        .alarm-status {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
            font-style: italic;
        }

        .alarm-toggle.active .alarm-status { color: var(--green-light); }

        .filter-container {
            max-width: 800px;
            margin: 0 auto 30px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-container { flex: 1; position: relative; }

        .search-box {
            width: 100%;
            padding: 14px 20px 14px 45px;
            background: var(--bg-card);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 1rem;
            box-shadow: var(--shadow-gold);
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--gold-primary);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gold-primary);
        }

        .filter-buttons { display: flex; gap: 10px; }

        .filter-btn {
            padding: 12px 20px;
            background: var(--bg-card);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .filter-btn:hover {
            background: var(--gold-primary);
            border-color: var(--gold-primary);
        }

        .filter-btn.active {
            background: var(--gold-gradient);
            border-color: var(--gold-primary);
            font-weight: 600;
        }

        .ttg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .ttg-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-gold);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
        }

        .ttg-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gold-gradient);
            transition: background 0.3s ease;
        }

        .ttg-card.done {
            background: rgba(45, 122, 45, 0.1);
            border-color: rgba(81, 207, 102, 0.3);
            box-shadow: var(--shadow-green);
        }

        .ttg-card.done::before { background: var(--green-gradient); }

        .ttg-card:hover { transform: translateY(-8px) scale(1.02); }

        .ttg-card:not(.done):hover {
            box-shadow: 0 12px 30px rgba(212, 175, 55, 0.4), var(--gold-glow);
        }

        .ttg-card.done:hover {
            box-shadow: 0 12px 30px rgba(45, 122, 45, 0.4), var(--green-glow);
        }

        .ttg-card__title {
            font-size: 1.15rem;
            font-weight: 600;
            padding: 15px 20px;
            background: rgba(212, 175, 55, 0.1);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            color: var(--gold-light);
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            /* Background icon */
            position: relative;
            overflow: hidden;
        }

        .ttg-card__title::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: var(--card-icon-url);
            background-size: cover;
            background-repeat: no-repeat;
            background-position: top center;
            opacity: 0.25;
            pointer-events: none;
            z-index: 0;
        }

        .ttg-card__title > * {
            position: relative;
            z-index: 1;
        }

        .title-top-row {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        .ttg-card.done .ttg-card__title {
            color: var(--green-light);
            background: rgba(45, 122, 45, 0.15);
        }

        /* Result Display */
        .result-display {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            min-height: 45px;
        }

        .ttg-card.done .result-display {
            border-color: rgba(81, 207, 102, 0.3);
            background: rgba(45, 122, 45, 0.1);
        }

        .result-display.has-content { display: flex; }

        .result-numbers {
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: var(--gold-accent);
            letter-spacing: 1px;
        }

        .ttg-card.done .result-numbers { color: var(--green-light); }

        .copy-icon-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        .copy-icon-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: scale(1.1);
        }

        .ttg-card.done .copy-icon-btn:hover { background: rgba(45, 122, 45, 0.3); }

        .copy-icon-btn svg {
            width: 20px;
            height: 20px;
            stroke: var(--gold-light);
            transition: stroke 0.3s ease;
        }

        .ttg-card.done .copy-icon-btn svg { stroke: var(--green-light); }
        .copy-icon-btn.copied svg { stroke: var(--green-light); }

        .countdown-timer {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gold-accent);
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
            padding: 8px 15px;
            background: rgba(212, 175, 55, 0.15);
            border-radius: 6px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            transition: all 0.3s ease;
        }

        .countdown-timer.phase-countdown {
            color: var(--gold-accent);
            border-color: rgba(255, 68, 68, 0.3);
            background: rgba(212, 175, 55, 0.15);
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
        }

        .countdown-timer.phase-betclose {
            color: #888;
            border-color: rgba(136, 136, 136, 0.3);
            background: rgba(136, 136, 136, 0.15);
            text-shadow: none;
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .countdown-timer.warning {
            color: #ffa500;
            text-shadow: 0 0 10px rgba(255, 165, 0, 0.5);
            animation: pulse 1s ease-in-out infinite;
            border-color: rgba(255, 165, 0, 0.3);
            background: rgba(255, 165, 0, 0.15);
        }

        .countdown-timer.critical {
            color: #ff0000;
            text-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
            animation: pulse-fast 0.8s ease-in-out infinite;
            border-color: rgba(255, 0, 0, 0.5);
            background: rgba(255, 0, 0, 0.2);
            font-weight: 900;
        }

        .countdown-timer.holiday {
            color: #888;
            text-shadow: none;
            animation: none;
            background: rgba(136, 136, 136, 0.15);
            border-color: rgba(136, 136, 136, 0.3);
            font-size: 0.95rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }

        @keyframes pulse-fast {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(1.05); }
        }

        .status-badge {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.done {
            background: var(--green-primary);
            color: white;
        }

        .ttg-card__row {
            display: flex;
            justify-content: space-between;
            padding: 12px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .ttg-card__row:last-child { border-bottom: none; }

        .ttg-card__label {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .ttg-card__label svg {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            color: var(--gold-primary);
            transition: color 0.3s ease;
        }

        .ttg-card.done .ttg-card__label svg { color: var(--green-primary); }

        .ttg-card__value { font-weight: 500; color: var(--text-light); }
        .ttg-card__value--tutup { color: #F4D03F; }
        .ttg-card__value--buka { color: #51cf66; }

        .ttg-card__site {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .ttg-card__site a {
            flex: 1;
            padding: 8px 12px;
            background: var(--gold-gradient);
            color: var(--bg-dark);
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            text-align: center;
        }

        .ttg-card.done .ttg-card__site a { background: var(--green-gradient); }

        .ttg-card__site a:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .input-section {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(212, 175, 55, 0.2);
        }

        .ttg-card.done .input-section {
            background: rgba(45, 122, 45, 0.1);
            border-top-color: rgba(81, 207, 102, 0.2);
        }

        .input-group { margin-bottom: 10px; }

        .input-group label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .input-group input {
            width: 100%;
            padding: 8px 12px;
            background: var(--bg-dark);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 4px;
            color: var(--text-light);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .ttg-card.done .input-group input {
            border-color: rgba(81, 207, 102, 0.3);
            background: rgba(45, 122, 45, 0.05);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .ttg-card.done .input-group input:focus { border-color: var(--green-primary); }
        .input-group input:disabled { opacity: 0.6; cursor: not-allowed; }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-copy { background: var(--gold-gradient); color: var(--bg-dark); }
        .btn-copy:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }

        .btn-done { background: var(--green-gradient); color: white; }
        .btn-done:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }

        .btn-reset { background: #666; color: white; }
        .btn-reset:hover:not(:disabled) { background: #888; transform: translateY(-2px); }

        .btn:active:not(:disabled) { transform: translateY(0); }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .modal-header {
            font-size: 1.5rem;
            color: var(--gold-light);
            margin-bottom: 20px;
            text-align: center;
        }

        .modal-body {
            background: var(--bg-dark);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .modal-footer { display: flex; gap: 10px; }

        .modal-footer button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-modal-copy { background: var(--gold-gradient); color: var(--bg-dark); }
        .btn-modal-close { background: #666; color: white; }

        .btn-modal-copy:hover,
        .btn-modal-close:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }

        .btn-modal-copy.copied { background: #51cf66; color: white; }

        .toast-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--green-gradient);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10001;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s;
            pointer-events: none;
        }

        .toast-notification.success { background: var(--green-gradient); }
        .toast-notification.error { background: linear-gradient(135deg, #D4AF37, #F4D03F); }
        .toast-notification.info { background: linear-gradient(135deg, #0066cc, #4488ff); }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }

        @media (max-width: 768px) {
            .toast-notification { top: 10px; right: 10px; left: 10px; font-size: 0.9rem; }
            .header h1 { font-size: 2rem; }
            .ttg-grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
            .filter-container { flex-direction: column; }
            .filter-buttons { width: 100%; justify-content: center; }
            .countdown-timer { font-size: 0.95rem; letter-spacing: 1px; }
            .alarm-controls-container { flex-direction: column; }
            .result-numbers { font-size: 0.95rem; }
        }

        /* Comparison Table */
        .comparison-container {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 220px;
            max-width: calc(100vw - 40px);
            z-index: 1000;
            font-size: 0.75rem;
        }

        .comparison-header {
            background: var(--bg-card);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px 8px 0 0;
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .comparison-header:hover { background: rgba(37, 37, 37, 0.95); }

        .comparison-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--gold-light);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .comparison-toggle { font-size: 1rem; transition: transform 0.3s ease; }
        .comparison-toggle.collapsed { transform: rotate(-90deg); }

        .comparison-content {
            background: var(--bg-card);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .comparison-content.collapsed { max-height: 0; border: none; }

        .comparison-textarea {
            width: 100%;
            min-height: 80px;
            max-height: 120px;
            padding: 8px;
            background: var(--bg-dark);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 0;
            color: var(--text-light);
            font-size: 0.7rem;
            font-family: 'Courier New', monospace;
            resize: vertical;
            outline: none;
            line-height: 1.3;
        }

        .comparison-textarea:focus { border-color: var(--gold-primary); }
        .comparison-textarea::placeholder { color: #666; font-size: 0.7rem; }

        .comparison-actions {
            padding: 6px 8px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 6px;
        }

        .btn-compare {
            flex: 1;
            padding: 6px 8px;
            background: var(--gold-gradient);
            color: var(--bg-dark);
            border: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-compare:hover { transform: translateY(-1px); box-shadow: 0 2px 6px rgba(0,0,0,0.3); }

        .btn-clear-compare {
            flex: 1;
            padding: 6px 8px;
            background: #666;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-clear-compare:hover { background: #888; transform: translateY(-1px); }

        .comparison-table-wrapper {
            max-height: 300px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .comparison-table-wrapper::-webkit-scrollbar { width: 4px; }
        .comparison-table-wrapper::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); }
        .comparison-table-wrapper::-webkit-scrollbar-thumb { background: var(--gold-primary); border-radius: 2px; }
        .comparison-table-wrapper::-webkit-scrollbar-thumb:hover { background: var(--gold-light); }

        .comparison-table { width: 100%; border-collapse: collapse; font-size: 0.65rem; }

        .comparison-table thead {
            position: sticky;
            top: 0;
            background: var(--bg-dark);
            z-index: 10;
        }

        .comparison-table th {
            padding: 6px 4px;
            text-align: left;
            font-size: 0.6rem;
            color: var(--text-secondary);
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
            font-weight: 600;
            text-transform: uppercase;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .comparison-table th:nth-child(1) { width: 35%; }
        .comparison-table th:nth-child(2) { width: 25%; }
        .comparison-table th:nth-child(3) { width: 25%; }
        .comparison-table th:nth-child(4) { width: 15%; text-align: center; }

        .comparison-table td {
            padding: 4px;
            font-size: 0.65rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .comparison-table td:nth-child(4) { text-align: center; }
        .comparison-table tr:hover { background: rgba(255,255,255,0.03); }

        .comparison-name {
            color: var(--text-light);
            font-weight: 500;
            font-size: 0.6rem;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .comparison-numbers {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            font-size: 0.65rem;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .comparison-status { text-align: center; font-size: 0.85rem; }

        .match-same { color: var(--green-light); }
        .match-different { color: #F4D03F; }
        .match-empty { color: #888; }

        .comparison-empty-state {
            padding: 20px 12px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.7rem;
            line-height: 1.4;
        }

        .comparison-stats {
            padding: 6px 8px;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-around;
            font-size: 0.65rem;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
        }

        .stat-item { display: flex; align-items: center; gap: 3px; }
        .stat-label { color: var(--text-secondary); font-size: 0.6rem; }
        .stat-value { font-weight: 700; font-size: 0.7rem; }
        .stat-value.green { color: var(--green-light); }
        .stat-value.red { color: #F4D03F; }
        .stat-value.gray { color: #888; }

        @media (max-width: 768px) {
            .comparison-container {
                position: relative;
                width: 100%;
                margin-bottom: 20px;
                left: 0;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Comparison Table -->
    <div class="comparison-container">
        <div class="comparison-header" onclick="toggleComparison()">
            <div class="comparison-title"><span>Perbandingan</span></div>
            <div class="comparison-toggle" id="comparisonToggle">‚ñº</div>
        </div>
        <div class="comparison-content" id="comparisonContent">
            <textarea class="comparison-textarea" id="comparisonInput" placeholder="Paste data hasil dari line" oninput="autoCompare()"></textarea>
            <div class="comparison-actions">
                <button class="btn-compare" onclick="compareData()">Cek</button>
                <button class="btn-clear-compare" onclick="clearComparison()">Clear</button>
            </div>
            <div class="comparison-table-wrapper" id="comparisonTableWrapper" style="display: none;">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Pasaran</th>
                            <th>Man</th>
                            <th>Form</th>
                            <th>‚úì</th>
                        </tr>
                    </thead>
                    <tbody id="comparisonTableBody"></tbody>
                </table>
                <div class="comparison-stats" id="comparisonStats" style="display: none;">
                    <div class="stat-item">
                        <span class="stat-label">Sama:</span>
                        <span class="stat-value green" id="statSame">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Beda:</span>
                        <span class="stat-value red" id="statDiff">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Kosong:</span>
                        <span class="stat-value gray" id="statEmpty">0</span>
                    </div>
                </div>
            </div>
            <div class="comparison-empty-state" id="comparisonEmpty">Paste data, lalu klik Bandingkan</div>
        </div>
    </div>

    <div class="header">
        <h1>JADWAL TOGEL</h1>
        <div class="datetime-display">
            <div class="date-box">
                <div class="date-label">üìÖ Tanggal Hari Ini</div>
                <div class="date-value" id="currentDate">Loading...</div>
            </div>
            <div class="time-box">
                <div class="time-label">üïê Jam Sekarang</div>
                <div class="time-value" id="currentTime">00:00:00</div>
                <div class="timezone">WIB (GMT+7)</div>
            </div>
        </div>
        <div class="alarm-controls-container">
            <div class="alarm-toggle" onclick="toggleAlarm()">
                <div class="toggle-switch" id="alarmSwitch">
                    <div class="toggle-slider"></div>
                </div>
                <span class="alarm-icon">üîî</span>
                <div style="display: flex; flex-direction: column; gap: 2px;">
                    <span class="toggle-label">Alarm Suara</span>
                    <div class="alarm-status" id="alarmStatus">Klik untuk mengaktifkan</div>
                    <div class="volume-control">
                        <span style="font-size: 0.8rem;">üîä</span>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80" onchange="updateVolume(this.value)">
                        <span id="volumeLabel" style="font-size: 0.8rem; min-width: 30px;">80%</span>
                    </div>
                </div>
            </div>
            <button class="clear-data-btn" onclick="clearAllData()">Hapus Semua Data</button>
        </div>
    </div>

    <div class="filter-container">
        <div class="search-container">
            <div class="search-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>
            <input type="text" id="searchInput" class="search-box" placeholder="Cari nama pasaran togel..." />
        </div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">Semua</button>
            <button class="filter-btn" data-filter="pending">Pending</button>
            <button class="filter-btn" data-filter="done">Done</button>
        </div>
    </div>

    <div id="jadwal-kartu" class="ttg-grid"></div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Hasil Pengeluaran</div>
            <div id="modalBody" class="modal-body"></div>
            <div class="modal-footer">
                <button class="btn-modal-copy" onclick="copyModalText()">Copy</button>
                <button class="btn-modal-close" onclick="closeModal()">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        const BASE = 'https://png-res.png999.com/assets/LOTTERY-Web/cardList';

        const pasaranData = [
            {name: "HOKI DRAW 00",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "23:59 WIB", buka: "00:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MACAU PAGI",     icon: `${BASE}/TTM6/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "00:00 WIB", buka: "00:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "HUAHIN 0100",         icon: `${BASE}/HUA01/icon/icon.png`, days: "Senin s/d Minggu", tutup: "00:45 WIB", buka: "01:00 WIB", website: "https://huahinlottery.com/", live: "https://www.youtube.com/@huahinlottery5727", prizeType: "price123"},
            {name: "HOKI DRAW 01",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "00:59 WIB", buka: "01:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "KENTUCKY MIDDAY",     icon: `${BASE}/KTM/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "01:05 WIB", buka: "01:20 WIB", website: "https://www.kylottery.com/apps/", live: null, prizeType: "price1"},
            {name: "BANGKOK 0130",        icon: `${BASE}/BKK01/icon/icon.png`, days: "Senin s/d Minggu", tutup: "01:15 WIB", buka: "01:30 WIB", website: "https://bangkokpoolstoday.com/", live: null, prizeType: "price123"},
            {name: "FLORIDA MIDDAY",      icon: `${BASE}/FLM/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "01:20 WIB", buka: "01:30 WIB", website: "https://floridalottery.com/", live: "https://www.youtube.com/user/floridalottery", prizeType: "price1"},
            {name: "HOKI DRAW 02",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "01:59 WIB", buka: "02:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "NEW YORK MIDDAY",     icon: `${BASE}/NYM/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "02:15 WIB", buka: "02:25 WIB", website: "https://nylottery.ny.gov/", live: "https://www.youtube.com/@NewYorkLottery/streams", prizeType: "price1"},
            {name: "BRUNEI 02",           icon: `${BASE}/BRU02/icon/icon.png`, days: "Senin s/d Minggu", tutup: "02:30 WIB", buka: "02:45 WIB", website: "https://bruneipools.com/", live: null, prizeType: "price123"},
            {name: "HOKI DRAW 03",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "02:59 WIB", buka: "03:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "CAROLINA DAY",        icon: `${BASE}/NCD/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "02:45 WIB", buka: "03:00 WIB", website: "https://www.wral.com/entertainment/lottery/", live: null, prizeType: "price1"},
            {name: "OREGON 03",           icon: `${BASE}/ORG03/icon/icon.png`, days: "Senin s/d Minggu", tutup: "03:50 WIB", buka: "04:00 WIB", website: "https://www.oregonlottery.org/pick-4/winning-numbers/", live: null, prizeType: "price1"},
            {name: "HOKI DRAW 04",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "03:59 WIB", buka: "04:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "HOKI DRAW 05",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "04:59 WIB", buka: "05:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "HOKI DRAW 06",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "05:59 WIB", buka: "06:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "OREGON 06",           icon: `${BASE}/ORG6/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "06:50 WIB", buka: "07:00 WIB", website: "https://www.oregonlottery.org/pick-4/winning-numbers/", live: null, prizeType: "price1"},
            {name: "HOKI DRAW 07",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "06:59 WIB", buka: "07:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "HOKI DRAW 08",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "07:59 WIB", buka: "08:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "HOKI DRAW 09",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "08:59 WIB", buka: "09:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "BANGKOK 0930",        icon: `${BASE}/BKK02/icon/icon.png`, days: "Senin s/d Minggu", tutup: "09:15 WIB", buka: "09:30 WIB", website: "https://bangkokpoolstoday.com/", live: null, prizeType: "price123"},
            {name: "CALIFORNIA",          icon: `${BASE}/CLF/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "09:25 WIB", buka: "09:30 WIB", website: "https://www.calottery.com/draw-games/daily-4", live: null, prizeType: "price1"},
            {name: "FLORIDA EVENING",     icon: `${BASE}/FLE/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "09:35 WIB", buka: "09:45 WIB", website: "https://floridalottery.com/games/draw-games/pick-4", live: "https://www.youtube.com/user/floridalottery", prizeType: "price1"},
            {name: "OREGON 09",           icon: `${BASE}/ORG09/icon/icon.png`, days: "Senin s/d Minggu", tutup: "09:50 WIB", buka: "10:00 WIB", website: "https://www.oregonlottery.org/pick-4/winning-numbers/", live: null, prizeType: "price1"},
            {name: "HOKI DRAW 10",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "09:59 WIB", buka: "10:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "NEW YORK EVENING",    icon: `${BASE}/NYE/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "10:25 WIB", buka: "10:35 WIB", website: "https://nylottery.ny.gov/", live: "https://www.youtube.com/@NewYorkLottery/streams", prizeType: "price1"},
            {name: "KENTUCKY EVENING",    icon: `${BASE}/KTE/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "10:45 WIB", buka: "11:00 WIB", website: "https://www.kylottery.com/apps/", live: null, prizeType: "price1"},
            {name: "TOTO CAMBODIA",       icon: `${BASE}/TTC/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "10:45 WIB", buka: "11:00 WIB", website: "https://totocambodialive.com/", live: "https://kick.com/totocambodia", prizeType: "price123"},
            {name: "HOKI DRAW 11",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "10:59 WIB", buka: "11:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "CHELSEA 11",          icon: `${BASE}/CHS11/icon/icon.png`, days: "Senin s/d Minggu", tutup: "11:00 WIB", buka: "11:15 WIB", website: "https://chelseapools.co.uk/", live: null, prizeType: "price123"},
            {name: "CAROLINA EVENING",    icon: `${BASE}/NCD2/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "11:17 WIB", buka: "11:22 WIB", website: "https://www.wral.com/entertainment/lottery/", live: null, prizeType: "price1"},
            {name: "HOKI DRAW 12",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "11:59 WIB", buka: "12:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "BULLSEYE",            icon: `${BASE}/BLE/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "12:00 WIB", buka: "12:15 WIB", website: "https://mylotto.co.nz/results/bullseye", live: null, prizeType: "price1"},
            {name: "POIPET 12",           icon: `${BASE}/PPT12/icon/icon.png`, days: "Senin s/d Minggu", tutup: "12:15 WIB", buka: "12:30 WIB", website: "https://poipetlottery.com/", live: "https://dlive.tv/PoipetPools", prizeType: "price123"},
            {name: "OREGON 12",           icon: `${BASE}/ORG12/icon/icon.png`, days: "Senin s/d Minggu", tutup: "12:50 WIB", buka: "13:00 WIB", website: "https://www.oregonlottery.org/pick-4/winning-numbers/", live: null, prizeType: "price1"},
            {name: "HOKI DRAW 13",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "12:59 WIB", buka: "13:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MACAU SIANG",    icon: `${BASE}/TTM1/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "13:00 WIB", buka: "13:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "HOKI DRAW 14",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "13:59 WIB", buka: "14:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "SYDNEY",              icon: `${BASE}/SYDLT/icon/icon.png`, days: "Senin s/d Minggu", tutup: "13:49 WIB", buka: "14:05 WIB", website: "https://sydneyfunlotto.net/", live: "https://kick.com/sydney-lotto-official", prizeType: "price123"},
            {name: "BRUNEI 14",           icon: `${BASE}/BRU14/icon/icon.png`, days: "Senin s/d Minggu", tutup: "14:30 WIB", buka: "14:45 WIB", website: "https://bruneipools.com/", live: null, prizeType: "price123"},
            {name: "HOKI DRAW 15",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "14:59 WIB", buka: "15:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "CHELSEA 15",          icon: `${BASE}/CHS15/icon/icon.png`, days: "Senin s/d Minggu", tutup: "15:00 WIB", buka: "15:15 WIB", website: "https://chelseapools.co.uk/", live: null, prizeType: "price123"},
            {name: "TOTO MALI 1530",      icon: `${BASE}/MALI15/icon/icon.png`,days: "Senin s/d Minggu", tutup: "15:15 WIB", buka: "15:30 WIB", website: "https://totomali.com/", live: "https://www.youtube.com/@TotoMaliLive", prizeType: "price123"},
            {name: "POIPET 15",           icon: `${BASE}/PPT15/icon/icon.png`, days: "Senin s/d Minggu", tutup: "15:15 WIB", buka: "15:30 WIB", website: "https://poipetlottery.com/", live: "https://dlive.tv/PoipetPools", prizeType: "price123"},
            {name: "HOKI DRAW 16",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "15:59 WIB", buka: "16:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MACAU SORE",     icon: `${BASE}/TTM2/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "16:00 WIB", buka: "16:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "HUAHIN 1630",         icon: `${BASE}/HUA02/icon/icon.png`, days: "Senin s/d Minggu", tutup: "16:15 WIB", buka: "16:30 WIB", website: "https://huahinlottery.com/", live: "https://www.youtube.com/@huahinlottery5727", prizeType: "price123"},
            {name: "HOKI DRAW 17",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "16:59 WIB", buka: "17:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "KING KONG4D SORE",    icon: `${BASE}/KK1/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "17:00 WIB", buka: "17:15 WIB", website: "https://kingkongpools.id/", live: "https://kick.com/king-kong-pools", prizeType: "price1"},
            {name: "SINGAPORE",           icon: `${BASE}/SGD/icon/icon.png`,   days: "HARI SELASA & JUM'AT ( LIBUR )", tutup: "17:30 WIB", buka: "17:45 WIB", website: "https://www.singaporepools.com.sg/landing/en/Pages/index.html", live: null, prizeType: "price123", activeDays: [1, 3, 4, 6, 0]},
            {name: "HOKI DRAW 18",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "17:59 WIB", buka: "18:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "MAGNUM4D",            icon: `${BASE}/MAG/icon/icon.png`,   days: "HARI RABU, SABTU & MINGGU", tutup: "18:10 WIB", buka: "18:40 WIB", website: "https://www.magnum4d.my/en", live: null, prizeType: "price123", activeDays: [3, 6, 0]},
            {name: "HOKI DRAW 19",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "18:59 WIB", buka: "19:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MACAU MALAM I",  icon: `${BASE}/TTM3/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "19:00 WIB", buka: "19:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "CHELSEA 19",          icon: `${BASE}/CHS19/icon/icon.png`, days: "Senin s/d Minggu", tutup: "19:00 WIB", buka: "19:15 WIB", website: "https://chelseapools.co.uk/", live: null, prizeType: "price123"},
            {name: "POIPET 19",           icon: `${BASE}/PPT19/icon/icon.png`, days: "Senin s/d Minggu", tutup: "19:30 WIB", buka: "19:45 WIB", website: "https://poipetlottery.com/", live: "https://dlive.tv/PoipetPools", prizeType: "price123"},
            {name: "PCSO",                icon: `${BASE}/PCO/icon/icon.png`,   days: "Minggu Libur", tutup: "19:50 WIB", buka: "20:10 WIB", website: "https://www.pcso.gov.ph/", live: "https://www.youtube.com/@PCSOGOVPHOfficial/streams", prizeType: "price1", activeDays: [1, 2, 3, 4, 5, 6]},
            {name: "HOKI DRAW 20",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "19:59 WIB", buka: "20:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MALI 2030",      icon: `${BASE}/MALI20/icon/icon.png`,days: "Senin s/d Minggu", tutup: "20:15 WIB", buka: "20:30 WIB", website: "https://totomali.com/", live: "https://www.youtube.com/@TotoMaliLive", prizeType: "price123"},
            {name: "HUAHIN 2100",         icon: `${BASE}/HUA03/icon/icon.png`, days: "Senin s/d Minggu", tutup: "20:45 WIB", buka: "21:00 WIB", website: "https://huahinlottery.com/", live: "https://www.youtube.com/@huahinlottery5727", prizeType: "price123"},
            {name: "HOKI DRAW 21",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "20:59 WIB", buka: "21:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "CHELSEA 21",          icon: `${BASE}/CHS21/icon/icon.png`, days: "Senin s/d Minggu", tutup: "21:00 WIB", buka: "21:15 WIB", website: "https://chelseapools.co.uk/", live: null, prizeType: "price123"},
            {name: "NEVADA",              icon: `${BASE}/NVD/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "21:15 WIB", buka: "21:30 WIB", website: "https://www.nevadalottery.us/", live: null, prizeType: "price123"},
            {name: "BRUNEI 21",           icon: `${BASE}/BRU21/icon/icon.png`, days: "Senin s/d Minggu", tutup: "21:30 WIB", buka: "21:45 WIB", website: "https://bruneipools.com/", live: null, prizeType: "price123"},
            {name: "HOKI DRAW 22",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "21:59 WIB", buka: "22:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "TOTO MACAU MALAM II", icon: `${BASE}/TTM4/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "22:00 WIB", buka: "22:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "POIPET 22",           icon: `${BASE}/PPT22/icon/icon.png`, days: "Senin s/d Minggu", tutup: "22:30 WIB", buka: "22:45 WIB", website: "https://poipetlottery.com/", live: "https://dlive.tv/PoipetPools", prizeType: "price123"},
            {name: "HOKI DRAW 23",        icon: `${BASE}/HKDW/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "22:59 WIB", buka: "23:00 WIB", website: "https://hokidraw.com/", live: "https://dlive.tv/u/HOKIDRAW", prizeType: "price1"},
            {name: "HONGKONG",            icon: `${BASE}/HKGLT/icon/icon.png`, days: "Senin s/d Minggu", tutup: "22:59 WIB", buka: "23:15 WIB", website: "https://hongkongfunlotto.net/", live: "https://kick.com/hongkong-lotto-official", prizeType: "price123"},
            {name: "TOTO MACAU MALAM III",icon: `${BASE}/TTM5/icon/icon.png`,  days: "Senin s/d Minggu", tutup: "23:00 WIB", buka: "23:15 WIB", website: "https://totomacaunew.us/", live: "https://kick.com/live-ttm4d", prizeType: "price1"},
            {name: "TOTO MALI 2330",      icon: `${BASE}/MALI23/icon/icon.png`,days: "Senin s/d Minggu", tutup: "23:15 WIB", buka: "23:30 WIB", website: "https://totomali.com/", live: "https://www.youtube.com/@TotoMaliLive", prizeType: "price123"},
            {name: "KING KONG4D MALAM",   icon: `${BASE}/KK2/icon/icon.png`,   days: "Senin s/d Minggu", tutup: "23:30 WIB", buka: "23:45 WIB", website: "https://kingkongpools.id/", live: "https://kick.com/king-kong-pools", prizeType: "price1"}
        ];

        const cardStates = {};
        let alarmEnabled = localStorage.getItem('alarmEnabled') === 'true';
        let alarmVolume = parseInt(localStorage.getItem('alarmVolume') || '80') / 100;
        let selectedVoice = null;
        let voicesLoaded = false;
        const alarmPlayed = {};
        const previousStates = {};
        const STORAGE_KEY = 'jadwalTogelCardStates';

        function saveToLocalStorage() {
            try { localStorage.setItem(STORAGE_KEY, JSON.stringify(cardStates)); } catch(e) {}
        }

        function loadFromLocalStorage() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) { Object.assign(cardStates, JSON.parse(saved)); return true; }
            } catch(e) {}
            return false;
        }

        function clearOldData() {
            const savedTimestamp = localStorage.getItem('jadwalTogelTimestamp');
            const now = Date.now();
            const twoDays = 2 * 24 * 60 * 60 * 1000;
            if (savedTimestamp && (now - parseInt(savedTimestamp)) > twoDays) {
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem('jadwalTogelTimestamp');
            } else if (!savedTimestamp) {
                localStorage.setItem('jadwalTogelTimestamp', now.toString());
            }
        }

        function loadVoices() {
            const voices = window.speechSynthesis.getVoices();
            if (voices.length === 0) return;
            const indonesianVoice = voices.find(v => v.name.includes('Google Bahasa Indonesia'));
            if (indonesianVoice) { selectedVoice = indonesianVoice; voicesLoaded = true; }
            else { const fb = voices.find(v => v.lang.startsWith('id')); selectedVoice = fb || voices[0]; voicesLoaded = true; }
        }

        function parseTimeToMinutes(timeStr) {
            const [time] = timeStr.split(' ');
            const [h, m] = time.split(':').map(Number);
            return h * 60 + m;
        }

        function isActiveDay(data) {
            if (!data.activeDays) return true;
            return data.activeDays.includes(new Date().getDay());
        }

        function getNextActiveDay(data) {
            if (!data.activeDays) return null;
            const dayNames = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
            const cur = new Date().getDay();
            for (let i = 1; i <= 7; i++) {
                const nd = (cur + i) % 7;
                if (data.activeDays.includes(nd)) return dayNames[nd];
            }
            return null;
        }

        function getNextActiveDayDate(data) {
            if (!data.activeDays) return null;
            const cur = new Date().getDay();
            for (let i = 1; i <= 7; i++) {
                const nd = (cur + i) % 7;
                if (data.activeDays.includes(nd)) return { daysToAdd: i, dayOfWeek: nd };
            }
            return null;
        }

        function calculateCountdown(tutupTime, bukaTime, data) {
            if (!isActiveDay(data)) return { isHoliday: true, nextActiveDay: getNextActiveDay(data) };
            const now = new Date();
            const currentDay = now.getDay();
            const cur = now.getHours() * 60 + now.getMinutes();
            const tutup = parseTimeToMinutes(tutupTime);
            const buka = parseTimeToMinutes(bukaTime);
            let diff, phase;
            if (cur < tutup) { diff = tutup - cur; phase = 'countdown'; }
            else if (cur >= tutup && cur < buka) { return { isBetClose: true, isHoliday: false }; }
            else {
                const tomorrow = (currentDay + 1) % 7;
                const isTomActive = !data.activeDays || data.activeDays.includes(tomorrow);
                if (isTomActive) { diff = 24 * 60 - cur + tutup; }
                else {
                    const na = getNextActiveDayDate(data);
                    diff = na ? (na.daysToAdd * 24 * 60 - cur + tutup) : (24 * 60 - cur + tutup);
                }
                phase = 'countdown';
            }
            const secs = 60 - now.getSeconds();
            return { hours: Math.floor(diff/60), minutes: diff%60, seconds: secs===60?0:secs, totalMinutes: diff, isHoliday: false, isBetClose: false, phase };
        }

        function formatCountdown(cd) {
            if (cd.isHoliday) return `LIBUR - Next: ${cd.nextActiveDay}`;
            if (cd.isBetClose) return 'BET CLOSE';
            return `${String(cd.hours).padStart(2,'0')}:${String(cd.minutes).padStart(2,'0')}:${String(cd.seconds).padStart(2,'0')}`;
        }

        function convertPasaranNameForSpeech(name) {
            const reps = { 'MACAU':'Makau','SINGAPORE':'Singapura','HONGKONG':'Hong Kong','SYDNEY':'Sidney','BANGKOK':'Bangkok','FLORIDA':'Florida','CAROLINA':'Carolina','KENTUCKY':'Kentucky','CALIFORNIA':'California','OREGON':'Oregon','NEVADA':'Nevada','HUAHIN':'Hua Hin','POIPET':'Poi Pet','BRUNEI':'Brunei','CHELSEA':'Chelsea','MAGNUM':'Magnum','MALI':'Mali','NEW YORK':'New York','HOKI':'Hoki','TOTO':'Toto','KING KONG':'King Kong','BULLSEYE':'Bulls Eye','PCSO':'Pe Ce Es O' };
            let converted = name;
            for (const [k,v] of Object.entries(reps)) converted = converted.replace(new RegExp('\\b'+k+'\\b','gi'), v);
            converted = converted.replace(/\bDRAW\b/gi,'Draw').replace(/\b4D\b/gi,'Empat D');
            converted = converted.replace(/(\d{2,4})/g, m => m.split('').join(' '));
            return converted;
        }

        function playAlarm(pasaranNames, repeatCount=1) {
            if (!alarmEnabled || !voicesLoaded || !selectedVoice) return;
            if (typeof pasaranNames === 'string') pasaranNames = [pasaranNames];
            const today = new Date().toDateString();
            const alarmKey = `${today}-${pasaranNames.join('-')}`;
            if (alarmPlayed[alarmKey]) return;
            alarmPlayed[alarmKey] = true;
            if (!('speechSynthesis' in window)) return;
            const converted = pasaranNames.map(n => convertPasaranNameForSpeech(n)).join(', ');
            const u1 = new SpeechSynthesisUtterance(converted);
            u1.voice = selectedVoice; u1.lang = selectedVoice.lang; u1.rate = 1.0; u1.volume = alarmVolume;
            const u2 = new SpeechSynthesisUtterance('BET CLOSE');
            u2.voice = selectedVoice; u2.lang = selectedVoice.lang; u2.rate = 1.0; u2.volume = alarmVolume;
            u1.onend = () => window.speechSynthesis.speak(u2);
            window.speechSynthesis.speak(u1);
        }

        function toggleAlarm() {
            alarmEnabled = !alarmEnabled;
            localStorage.setItem('alarmEnabled', alarmEnabled);
            const sw = document.getElementById('alarmSwitch');
            const tog = sw.closest('.alarm-toggle');
            const st = document.getElementById('alarmStatus');
            if (alarmEnabled) { sw.classList.add('active'); tog.classList.add('active'); st.textContent='Alarm AKTIF'; showToast('Alarm Aktif',false,'success'); if(!voicesLoaded) loadVoices(); }
            else { sw.classList.remove('active'); tog.classList.remove('active'); st.textContent='Klik untuk mengaktifkan'; showToast('Alarm NonAktif',true,'error'); }
        }

        function updateVolume(value) {
            alarmVolume = parseInt(value)/100;
            localStorage.setItem('alarmVolume', value);
            document.getElementById('volumeLabel').textContent = value+'%';
        }

        function updateCountdowns() {
            const betCloseGroups = {};
            document.querySelectorAll('.countdown-timer').forEach((timer, index) => {
                const data = pasaranData[index];
                const cd = calculateCountdown(data.tutup, data.buka, data);
                const prev = previousStates[index];
                const cur = cd.isBetClose?'betclose':cd.isHoliday?'holiday':'countdown';
                timer.textContent = formatCountdown(cd);
                timer.classList.remove('warning','critical','expired','holiday','phase-countdown','phase-betclose');
                if (cd.isHoliday) { timer.classList.add('holiday'); }
                else if (cd.isBetClose) {
                    timer.classList.add('phase-betclose');
                    if (prev==='countdown' && cur==='betclose') {
                        if (!betCloseGroups[data.tutup]) betCloseGroups[data.tutup]=[];
                        betCloseGroups[data.tutup].push(data.name);
                    }
                } else {
                    timer.classList.add('phase-countdown');
                    if (cd.totalMinutes<=30 && cd.totalMinutes>0) timer.classList.add('critical');
                }
                previousStates[index] = cur;
            });
            if (alarmEnabled && Object.keys(betCloseGroups).length>0) {
                for (const t in betCloseGroups) playAlarm(betCloseGroups[t], 1);
            }
        }

        function clearAllData() {
            if (confirm('Yakin ingin menghapus SEMUA data tersimpan? Tindakan ini tidak dapat dibatalkan!')) {
                Object.keys(cardStates).forEach(k => delete cardStates[k]);
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem('jadwalTogelTimestamp');
                renderCards();
                showToast('üóëÔ∏è Semua data tersimpan berhasil dihapus!', false, 'info');
            }
        }

        function getShio(number) {
            const shioTable = { "KUDA":[1,13,25,37,49,61,73,85,97],"ULAR":[2,14,26,38,50,62,74,86,98],"NAGA":[3,15,27,39,51,63,75,87,99],"KELINCI":[4,16,28,40,52,64,76,88,0],"HARIMAU":[5,17,29,41,53,65,77,89],"KERBAU":[6,18,30,42,54,66,78,90],"TIKUS":[7,19,31,43,55,67,79,91],"BABI":[8,20,32,44,56,68,80,92],"ANJING":[9,21,33,45,57,69,81,93],"AYAM":[10,22,34,46,58,70,82,94],"MONYET":[11,23,35,47,59,71,83,95],"KAMBING":[12,24,36,48,60,72,84,96] };
            const lt = parseInt(number.toString().slice(-2));
            for (const [s, nums] of Object.entries(shioTable)) if (nums.includes(lt)) return s;
            return "TIDAK DIKETAHUI";
        }

        function updateDateTime() {
            const now = new Date();
            const days = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
            const months = ['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'];
            document.getElementById('currentDate').textContent = `${days[now.getDay()]}, ${String(now.getDate()).padStart(2,'0')} ${months[now.getMonth()]} ${now.getFullYear()}`;
            document.getElementById('currentTime').textContent = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
        }

        function generateResultText(pasaran, prize1, prize2, prize3) {
            const shio = getShio(prize1);
            const now = new Date();
            const days = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
            const months = ['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'];
            const date = `${days[now.getDay()]} , ${String(now.getDate()).padStart(2,'0')} ${months[now.getMonth()]} ${now.getFullYear()}`;
            let text = `Hasil Pengeluaran : ${pasaran}\nHARI ${date.toUpperCase()}\nResult Prize 1 : ${prize1}`;
            if (prize2 && prize3) text += `\nPrize 1 SHIO   : ${shio}\nResult Prize 2 : ${prize2}\nResult Prize 3 : ${prize3}`;
            else text += `\nPrize 1 SHIO   : ${shio}`;
            text += `\nSelamat Kepada Pemenang, Salam JP`;
            return text;
        }

        function closeModal() { document.getElementById('resultModal').style.display = 'none'; }

        function copyModalText() {
            const text = document.getElementById('modalBody').textContent;
            const button = document.querySelector('.btn-modal-copy');
            const orig = button.textContent;
            navigator.clipboard.writeText(text).then(() => {
                button.textContent='‚úì Berhasil Dicopy!'; button.classList.add('copied');
                setTimeout(() => { button.textContent=orig; button.classList.remove('copied'); }, 2000);
            }).catch(() => { button.textContent='‚úó Gagal Copy'; setTimeout(() => button.textContent=orig, 2000); });
        }

        function updateResultDisplay(index) {
            const card = document.querySelector(`[data-index="${index}"]`);
            if (!card) return;
            const data = pasaranData[index];
            const resultDisplay = card.querySelector('.result-display');
            const resultNumbers = card.querySelector('.result-numbers');
            const prize1 = card.querySelector('.prize1').value.trim();
            if (!prize1) { resultDisplay.classList.remove('has-content'); return; }
            let displayText = prize1;
            if (data.prizeType==='price123') {
                const p2 = card.querySelector('.prize2')?.value.trim();
                const p3 = card.querySelector('.prize3')?.value.trim();
                if (p2 && p3) displayText = `${prize1},${p2},${p3}`;
            }
            resultNumbers.textContent = displayText;
            resultDisplay.classList.add('has-content');
        }

        function copyNumbersOnly(button, index) {
            const card = button.closest('.ttg-card');
            const resultNumbers = card.querySelector('.result-numbers')?.textContent.trim();
            if (!resultNumbers) { showToast('Tidak ada angka untuk dicopy!', true); return; }
            const ta = document.createElement('textarea');
            ta.value = resultNumbers;
            Object.assign(ta.style, {position:'fixed',top:'0',left:'0',width:'2em',height:'2em',padding:'0',border:'none',outline:'none',background:'transparent'});
            document.body.appendChild(ta); ta.focus(); ta.select();
            let ok = false;
            try { ok = document.execCommand('copy'); } catch(e) {}
            document.body.removeChild(ta);
            if (ok) { button.classList.add('copied'); showToast('‚úì Angka berhasil dicopy: '+resultNumbers); setTimeout(()=>button.classList.remove('copied'),2000); return; }
            if (navigator.clipboard?.writeText) {
                navigator.clipboard.writeText(resultNumbers).then(() => { button.classList.add('copied'); showToast('‚úì Angka berhasil dicopy: '+resultNumbers); setTimeout(()=>button.classList.remove('copied'),2000); }).catch(() => showCopyPrompt(resultNumbers));
            } else { showCopyPrompt(resultNumbers); }
        }

        function showCopyPrompt(text) {
            const modal = document.createElement('div');
            modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;justify-content:center;align-items:center;z-index:99999;';
            modal.className = 'copy-manual-modal';
            modal.innerHTML = `<div style="background:#252525;padding:30px;border-radius:12px;border:2px solid #D4AF37;max-width:400px;text-align:center;"><h3 style="color:#D4AF37;margin-bottom:20px;">Copy Manual</h3><input type="text" value="${text}" readonly style="width:100%;padding:15px;font-size:1.2rem;font-weight:bold;text-align:center;background:#1a1a1a;color:#51cf66;border:2px solid #51cf66;border-radius:8px;margin-bottom:20px;font-family:'Courier New',monospace;" onclick="this.select()" id="copyInput"><button onclick="this.closest('.copy-manual-modal').remove()" style="padding:12px 30px;background:#D4AF37;color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:1rem;">Tutup</button><p style="color:#888;font-size:0.85rem;margin-top:15px;">Klik angka di atas, lalu tekan Ctrl+C</p></div>`;
            document.body.appendChild(modal);
            setTimeout(() => { const inp=document.getElementById('copyInput'); if(inp){inp.focus();inp.select();} }, 100);
            modal.addEventListener('click', e => { if(e.target===modal) modal.remove(); });
        }

        function createCard(data, index) {
            const card = document.createElement('div');
            card.className = 'ttg-card';
            card.setAttribute('data-title', data.name.toLowerCase());
            card.setAttribute('data-index', index);
            card.setAttribute('data-status', 'pending');

            const iconHtml = '';

            const inputSection = data.prizeType === 'price123' ? `
                <div class="input-section">
                    <div class="input-group"><label>Prize 1:</label><input type="text" class="prize1" placeholder="Masukkan angka" oninput="autoSaveInput(${index})"></div>
                    <div class="input-group"><label>Prize 2:</label><input type="text" class="prize2" placeholder="Masukkan angka" oninput="autoSaveInput(${index})"></div>
                    <div class="input-group"><label>Prize 3:</label><input type="text" class="prize3" placeholder="Masukkan angka" oninput="autoSaveInput(${index})"></div>
                    <div class="action-buttons">
                        <button class="btn btn-copy" onclick="handleCopy(this,'${data.name}','${data.prizeType}')">Copy Hasil</button>
                        <button class="btn btn-done" onclick="handleDone(this,${index})">Done</button>
                    </div>
                    <button class="btn btn-reset" onclick="handleReset(this,${index})" style="display:none;width:100%;margin-top:10px;">Reset</button>
                </div>` : `
                <div class="input-section">
                    <div class="input-group"><label>Prize 1:</label><input type="text" class="prize1" placeholder="Masukkan angka" oninput="autoSaveInput(${index})"></div>
                    <div class="action-buttons">
                        <button class="btn btn-copy" onclick="handleCopy(this,'${data.name}','${data.prizeType}')">Copy Hasil</button>
                        <button class="btn btn-done" onclick="handleDone(this,${index})">Done</button>
                    </div>
                    <button class="btn btn-reset" onclick="handleReset(this,${index})" style="display:none;width:100%;margin-top:10px;">Reset</button>
                </div>`;

            card.innerHTML = `
                <div class="ttg-card__title" ${data.icon ? `style="--card-icon-url: url('${data.icon}')"` : ''}>
                    <div class="title-top-row">
                        <span>${data.name}</span>
                    </div>
                    <div class="countdown-timer">00:00:00</div>
                    <div class="result-display">
                        <span class="result-numbers"></span>
                        <button class="copy-icon-btn" onclick="copyNumbersOnly(this,${index})" title="Copy angka">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="ttg-card__row">
                    <span class="ttg-card__label">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.75A10.25 10.25 0 1 0 22.25 12 10.262 10.262 0 0 0 12 1.75Zm0 18.5A8.25 8.25 0 1 1 20.25 12 8.259 8.259 0 0 1 12 20.25Zm.625-7.875V6.5a.625.625 0 0 0-1.25 0v6.25a.625.625 0 0 0 .274.522l3.5 2.375a.625.625 0 1 0 .702-1.03Z"></path></svg>
                        Hari
                    </span>
                    <span class="ttg-card__value">${data.days}</span>
                </div>
                <div class="ttg-card__row">
                    <span class="ttg-card__label">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.75A10.25 10.25 0 1 0 22.25 12 10.262 10.262 0 0 0 12 1.75Zm0 18.5A8.25 8.25 0 1 1 20.25 12 8.259 8.259 0 0 1 12 20.25Zm.625-7.875V6.5a.625.625 0 0 0-1.25 0v6.25a.625.625 0 0 0 .274.522l3.5 2.375a.625.625 0 1 0 .702-1.03Z"></path></svg>
                        Tutup
                    </span>
                    <span class="ttg-card__value ttg-card__value--tutup">${data.tutup}</span>
                </div>
                <div class="ttg-card__row">
                    <span class="ttg-card__label">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.75A10.25 10.25 0 1 0 22.25 12 10.262 10.262 0 0 0 12 1.75Zm0 18.5A8.25 8.25 0 1 1 20.25 12 8.259 8.259 0 0 1 12 20.25Zm.625-7.875V6.5a.625.625 0 0 0-1.25 0v6.25a.625.625 0 0 0 .274.522l3.5 2.375a.625.625 0 1 0 .702-1.03Z"></path></svg>
                        Buka
                    </span>
                    <span class="ttg-card__value ttg-card__value--buka">${data.buka}</span>
                </div>
                <div class="ttg-card__site">
                    <a href="${data.website}" target="_blank" rel="noopener">Website</a>
                    ${data.live ? `<a href="${data.live}" target="_blank" rel="noopener">Live</a>` : ''}
                </div>
                ${inputSection}`;

            return card;
        }

        function showToast(message, isError=false, type='') {
            const toast = document.createElement('div');
            let cls = 'toast-notification';
            if (type==='success') cls+=' success';
            else if (type==='error'||isError) cls+=' error';
            else if (type==='info') cls+=' info';
            toast.className = cls;
            const icon = (type==='error'||isError)
                ? '<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>'
                : '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>';
            toast.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${icon}</svg><span>${message}</span>`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function handleCopy(button, pasaran, prizeType) {
            const card = button.closest('.ttg-card');
            const prize1 = card.querySelector('.prize1').value.trim();
            if (!prize1) { showToast('Harap masukkan Prize 1!', true); return; }
            let prize2=null, prize3=null;
            if (prizeType==='price123') {
                prize2 = card.querySelector('.prize2').value.trim();
                prize3 = card.querySelector('.prize3').value.trim();
                if (!prize2||!prize3) { showToast('Harap masukkan Prize 1, Prize 2, dan Prize 3!', true); return; }
            }
            navigator.clipboard.writeText(generateResultText(pasaran, prize1, prize2, prize3))
                .then(() => showToast('‚úì Hasil berhasil dicopy!'))
                .catch(() => showToast('‚úó Gagal copy hasil', true));
        }

        function handleDone(button, index) {
            const card = button.closest('.ttg-card');
            const prize1 = card.querySelector('.prize1').value.trim();
            if (!prize1) { showToast('Harap masukkan Prize 1 terlebih dahulu!', true); return; }
            if (pasaranData[index].prizeType==='price123') {
                const p2 = card.querySelector('.prize2').value.trim();
                const p3 = card.querySelector('.prize3').value.trim();
                if (!p2||!p3) { showToast('Harap masukkan semua Prize!', true); return; }
            }
            card.classList.add('done'); card.setAttribute('data-status','done');
            const title = card.querySelector('.ttg-card__title');
            if (!title.querySelector('.status-badge')) {
                const badge = document.createElement('span');
                badge.className='status-badge done'; badge.textContent='‚úì Done';
                title.appendChild(badge);
            }
            card.querySelectorAll('input').forEach(i => i.disabled=true);
            card.querySelector('.btn-done').style.display='none';
            card.querySelector('.btn-reset').style.display='block';
            cardStates[index] = { isDone:true, prize1:card.querySelector('.prize1').value, prize2:card.querySelector('.prize2')?.value||null, prize3:card.querySelector('.prize3')?.value||null };
            saveToLocalStorage(); triggerComparisonUpdate();
            showToast(`‚úì ${pasaranData[index].name} ditandai selesai!`);
        }

        function handleReset(button, index) {
            const card = button.closest('.ttg-card');
            card.classList.remove('done'); card.setAttribute('data-status','pending');
            card.querySelector('.status-badge')?.remove();
            card.querySelectorAll('input').forEach(i => { i.disabled=false; i.value=''; });
            card.querySelector('.btn-done').style.display='block';
            card.querySelector('.btn-reset').style.display='none';
            card.querySelector('.result-display').classList.remove('has-content');
            delete cardStates[index];
            saveToLocalStorage(); triggerComparisonUpdate();
            showToast(`‚Üª ${pasaranData[index].name} direset!`);
        }

        function autoSaveInput(index) {
            const card = document.querySelector(`[data-index="${index}"]`);
            if (!card||card.classList.contains('done')) return;
            const prize1 = card.querySelector('.prize1').value;
            const p2 = card.querySelector('.prize2');
            const p3 = card.querySelector('.prize3');
            updateResultDisplay(index);
            if (prize1||(p2&&p2.value)||(p3&&p3.value)) {
                if (!cardStates[index]) cardStates[index]={isDone:false};
                cardStates[index].prize1=prize1;
                if (p2) cardStates[index].prize2=p2.value;
                if (p3) cardStates[index].prize3=p3.value;
                clearTimeout(window.autoSaveTimeout);
                window.autoSaveTimeout = setTimeout(() => { saveToLocalStorage(); triggerComparisonUpdate(); }, 500);
            }
        }

        function renderCards() {
            const container = document.getElementById('jadwal-kartu');
            container.innerHTML = '';
            pasaranData.forEach((data, index) => {
                const card = createCard(data, index);
                container.appendChild(card);
                if (cardStates[index]) {
                    const el = container.querySelector(`[data-index="${index}"]`);
                    if (!el) return;
                    if (cardStates[index].prize1) el.querySelector('.prize1').value=cardStates[index].prize1;
                    if (cardStates[index].prize2) { const i=el.querySelector('.prize2'); if(i) i.value=cardStates[index].prize2; }
                    if (cardStates[index].prize3) { const i=el.querySelector('.prize3'); if(i) i.value=cardStates[index].prize3; }
                    updateResultDisplay(index);
                    if (cardStates[index].isDone) {
                        el.classList.add('done'); el.setAttribute('data-status','done');
                        const title=el.querySelector('.ttg-card__title');
                        if (!title.querySelector('.status-badge')) { const b=document.createElement('span'); b.className='status-badge done'; b.textContent='‚úì Done'; title.appendChild(b); }
                        el.querySelectorAll('input').forEach(i=>i.disabled=true);
                        el.querySelector('.btn-done').style.display='none';
                        el.querySelector('.btn-reset').style.display='block';
                    }
                }
            });
            updateCountdowns();
        }

        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase().trim();
            const filter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
            document.querySelectorAll('.ttg-card').forEach(card => {
                const title = card.getAttribute('data-title');
                const status = card.getAttribute('data-status');
                card.style.display = (title.includes(search)&&(filter==='all'||status===filter)) ? 'block' : 'none';
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            clearOldData();
            const hasLoaded = loadFromLocalStorage();
            const sw = document.getElementById('alarmSwitch');
            const tog = sw.closest('.alarm-toggle');
            const st = document.getElementById('alarmStatus');
            if (alarmEnabled) { sw.classList.add('active'); tog.classList.add('active'); st.textContent='Alarm AKTIF'; }
            else { st.textContent='Klik untuk mengaktifkan'; }
            const vol = localStorage.getItem('alarmVolume')||'80';
            document.getElementById('volumeSlider').value=vol;
            document.getElementById('volumeLabel').textContent=vol+'%';
            loadVoices();
            if (window.speechSynthesis.onvoiceschanged!==undefined) window.speechSynthesis.onvoiceschanged=loadVoices;
            updateDateTime(); setInterval(updateDateTime,1000);
            renderCards();
            if (hasLoaded&&Object.keys(cardStates).length>0) showToast(`‚úì Data tersimpan dimuat (${Object.keys(cardStates).length} pasaran)`,false,'info');
            setInterval(updateCountdowns,1000);
            const search = document.getElementById('searchInput');
            search.addEventListener('input', applyFilters);
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
                    this.classList.add('active'); applyFilters();
                });
            });
            search.focus();
        });

        window.onclick = e => { if(e.target===document.getElementById('resultModal')) closeModal(); };
        document.addEventListener('keydown', e => { if(e.key==='Escape'&&document.getElementById('resultModal').style.display==='flex') closeModal(); });

        // ‚îÄ‚îÄ Comparison Table ‚îÄ‚îÄ
        let comparisonData = [];
        let isComparisonCollapsed = false;

        function toggleComparison() {
            isComparisonCollapsed=!isComparisonCollapsed;
            document.getElementById('comparisonContent').classList.toggle('collapsed',isComparisonCollapsed);
            document.getElementById('comparisonToggle').classList.toggle('collapsed',isComparisonCollapsed);
        }

        function normalizePassaranName(name) {
            return name.toUpperCase().replace(/\s+/g,'').replace(/[^A-Z0-9]/g,'').trim();
        }

        function parseManualData(text) {
            const lines = text.split('\n').filter(l=>l.trim());
            const results=[]; let curP=null, curPrizes={};
            for (let line of lines) {
                line=line.trim(); if(!line) continue;
                if (line.match(/PRIZE\s*[123]\s*:/i)) {
                    const m=line.match(/PRIZE\s*([123])\s*:\s*(\d+)/i);
                    if (m&&curP) curPrizes[`prize${m[1]}`]=m[2];
                } else {
                    if (curP) results.push({name:curP,...curPrizes});
                    const parts=line.split(/\s+/);
                    if (parts.length>=2) {
                        const last=parts[parts.length-1];
                        const slast=parts.length>=3?parts[parts.length-2]:'';
                        if (/^\d{4,}$/.test(last)) { curP=parts.slice(0,-1).join(' '); curPrizes={prize1:last}; }
                        else if (/^\d{2}$/.test(last)&&!/^\d+$/.test(slast)) { curP=line; curPrizes={}; }
                        else if (/^\d{1,3}$/.test(last)) { curP=line; curPrizes={}; }
                        else { curP=line; curPrizes={}; }
                    } else { curP=line; curPrizes={}; }
                }
            }
            if (curP) results.push({name:curP,...curPrizes});
            return results;
        }

        function findMatchingPasaran(manualName) {
            const nm=normalizePassaranName(manualName);
            for (let i=0;i<pasaranData.length;i++) if(normalizePassaranName(pasaranData[i].name)===nm) return i;
            const hasTime=/\d{2,4}$/.test(manualName.replace(/\s+/g,''));
            if (!hasTime) {
                const matches=[];
                for (let i=0;i<pasaranData.length;i++) if(normalizePassaranName(pasaranData[i].name).startsWith(nm)) matches.push(i);
                if (matches.length===1) return matches[0];
                return -1;
            } else {
                for (let i=0;i<pasaranData.length;i++) {
                    const np=normalizePassaranName(pasaranData[i].name);
                    if (nm.includes(np)||np.includes(nm)) return i;
                }
            }
            return -1;
        }

        function findMatchingPasaranByPrize(manualName, prize1, prize2, prize3) {
            if (!prize1) return -1;
            const nm=normalizePassaranName(manualName);
            const candidates=[];
            for (let i=0;i<pasaranData.length;i++) {
                if (normalizePassaranName(pasaranData[i].name).startsWith(nm)&&cardStates[i]?.prize1) {
                    candidates.push({index:i,...cardStates[i]});
                }
            }
            for (const c of candidates) {
                if (c.prize1===prize1) {
                    if (prize2&&prize3) { if(c.prize2===prize2&&c.prize3===prize3) return c.index; }
                    else return c.index;
                }
            }
            return -1;
        }

        function compareData() {
            const input=document.getElementById('comparisonInput').value;
            if (!input.trim()) { showToast('Harap masukkan data!',true); return; }
            comparisonData=parseManualData(input);
            if (comparisonData.length===0) { showToast('Tidak ada data valid!',true); return; }
            renderComparisonTable();
        }

        function autoCompare() {
            clearTimeout(window.autoCompareTimeout);
            window.autoCompareTimeout=setTimeout(()=>{ if(document.getElementById('comparisonInput').value.trim()) compareData(); },1000);
        }

        function renderComparisonTable(showNotification=true) {
            const tbody=document.getElementById('comparisonTableBody');
            const wrapper=document.getElementById('comparisonTableWrapper');
            const empty=document.getElementById('comparisonEmpty');
            const stats=document.getElementById('comparisonStats');
            tbody.innerHTML='';
            window.matchedPasarans=[]; window.differentPasarans=[];
            let same=0, diff=0, empty_=0;
            comparisonData.forEach(manual => {
                let idx=findMatchingPasaran(manual.name);
                if (idx===-1&&manual.prize1) idx=findMatchingPasaranByPrize(manual.name,manual.prize1,manual.prize2,manual.prize3);
                const row=document.createElement('tr');
                const nc=document.createElement('td'); nc.className='comparison-name'; nc.textContent=manual.name; nc.title=manual.name;
                const mc=document.createElement('td'); mc.className='comparison-numbers';
                let manText='';
                if (manual.prize1&&manual.prize2&&manual.prize3) manText=`${manual.prize1},${manual.prize2},${manual.prize3}`;
                else if (manual.prize1) manText=manual.prize1;
                mc.textContent=manText; mc.title=manText;
                const fc=document.createElement('td'); fc.className='comparison-numbers';
                let formText='', isMatch=false, matchedName='', hasData=manText.length>0;
                if (idx!==-1&&cardStates[idx]) {
                    matchedName=pasaranData[idx].name;
                    if (cardStates[idx].prize1&&cardStates[idx].prize2&&cardStates[idx].prize3) formText=`${cardStates[idx].prize1},${cardStates[idx].prize2},${cardStates[idx].prize3}`;
                    else if (cardStates[idx].prize1) formText=cardStates[idx].prize1;
                    if (formText&&manText) isMatch=formText===manText;
                }
                fc.textContent=formText||'-'; fc.title=matchedName?`${matchedName}: ${formText}`:'Tidak ada data';
                const sc=document.createElement('td'); sc.className='comparison-status';
                if (hasData&&(!formText||idx===-1)) {
                    sc.innerHTML='<span class="match-empty">‚óã</span>';
                    mc.classList.add('match-empty'); fc.classList.add('match-empty');
                    if (idx===-1&&hasData) { diff++; window.differentPasarans.push(manual.name); }
                    else empty_++;
                } else if (!hasData) {
                    sc.innerHTML='<span class="match-empty">‚óã</span>';
                    mc.classList.add('match-empty'); fc.classList.add('match-empty'); empty_++;
                } else if (isMatch) {
                    sc.innerHTML='<span class="match-same">‚úì</span>';
                    mc.classList.add('match-same'); fc.classList.add('match-same'); same++;
                    window.matchedPasarans.push(matchedName);
                } else {
                    sc.innerHTML='<span class="match-different">‚úó</span>';
                    mc.classList.add('match-different'); fc.classList.add('match-different'); diff++;
                    window.differentPasarans.push(matchedName);
                }
                row.append(nc,mc,fc,sc); tbody.appendChild(row);
            });
            document.getElementById('statSame').textContent=same;
            document.getElementById('statDiff').textContent=diff;
            document.getElementById('statEmpty').textContent=empty_;
            wrapper.style.display='block'; empty.style.display='none'; stats.style.display='flex';
            if (showNotification) {
                if (diff===0&&same>0) {
                    (window.matchedPasarans||[]).forEach((n,i) => setTimeout(()=>showToast(`Perbandingan ${n} sama`,false,'success'),i*500));
                } else if (diff>0) {
                    (window.differentPasarans||[]).forEach((n,i) => setTimeout(()=>showToast(`${n||'Data'} tidak sama`,true,'error'),i*500));
                }
                window.matchedPasarans=[]; window.differentPasarans=[];
            }
        }

        function clearComparison() {
            document.getElementById('comparisonInput').value='';
            document.getElementById('comparisonTableBody').innerHTML='';
            document.getElementById('comparisonTableWrapper').style.display='none';
            document.getElementById('comparisonEmpty').style.display='block';
            document.getElementById('comparisonStats').style.display='none';
            comparisonData=[]; showToast('Tabel perbandingan dihapus',false,'info');
        }

        function triggerComparisonUpdate() {
            if (comparisonData.length>0) renderComparisonTable(false);
        }
    </script>
</body>
</html>
